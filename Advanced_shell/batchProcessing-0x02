#!/bin/bash
# Generates CSV report from PokÃ©mon data files

DATA_DIR="pokemon_data"
REPORT_FILE="pokemon_report.csv"

echo "Name,Height (m),Weight (kg)" > "$REPORT_FILE"

# Process each JSON file
for file in "$DATA_DIR"/*.json; do
    name=$(jq -r '.name' "$file")
    height=$(jq -r '.height/10' "$file")
    weight=$(jq -r '.weight/10' "$file")
    
    echo "$name,$height,$weight" >> "$REPORT_FILE"
done

# Calculate averages
awk -F',' '
NR>1 {
    height_sum += $2; 
    weight_sum += $3;
    count++;
} 
END {
    printf "\nAverage Height: %.2f m\n", height_sum/count;
    printf "Average Weight: %.2f kg\n", weight_sum/count;
}' "$REPORT_FILE"

echo "CSV Report generated at: $REPORT_FILE"